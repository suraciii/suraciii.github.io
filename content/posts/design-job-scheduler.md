---
title: 设计案例：分布式任务队列的执行调度
date: 2022-01-22T00:00:00Z
draft: true
---

## 项目背景

一个分布式的数据采集应用，其基本功能为采集各个电商平台上的商品信息，具体要求如下：
* 应用有多个用户，用户可以上传采集任务
* 应用能够并行执行多个任务，可以水平伸缩
* 采集任务可能会花费较长时间和计算资源


## 初始方案

  
在此之上，开发者设计出一个初步的方案：

由一个调度中心负责接收和管理所有由用户上传的任务，并根据相应的设定，分配各个任务给各个worker执行，如图所示

![](/design-job-scheduler/1.png)

这样的模式中，有两个特点
* 应用被分离成Manager和Worker，manager负责接收和管理任务，worker负责任务的执行，在这种设计下，worker可以被独立地伸缩
* master中维护了一个任务队列，如果所有worker都在忙碌状态中时，任务可以在队列中进行排队，并以先进先出的方式等待执行


## 问题




